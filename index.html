<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Quantum Bloch Sphere Visualizer (n â‰¤ 5)</title>
  <link rel="stylesheet" href="style.css" />
  <!-- math.js for complex numbers, Plotly for 3D plotting -->
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11/lib/browser/math.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <center>
    <h1>Quantum Bloch Sphere Visualizer</h1>
    <button id="themeToggle" aria-label="Toggle dark mode" title="Toggle theme" class="theme-toggle">ðŸŒ™</button>
  </center>
<div class="main">
<div class="circuitDisplay">

    <div class="controls">
      <label>Number of qubits :</label>
      <input id="numQ" type="number" min="1" value="2" />
      <button id="btnSet">Set</button>
      <div class="small note">Basis ordering is |q0 q1 â€¦ q(n-1)âŸ©, where q0 is the leftmost bit.</div>

      <div id="afterSet" class="hidden">
        <label>Initial basis state:</label>
        <select id="basisState"></select>
        <div id="basisInputWrap" class="hidden">
          <input id="basisInput" type="text" inputmode="numeric" pattern="[0-1]*" placeholder="binary bitstring (e.g., 000...)">
          <div class="small">Enter a lengthâ€‘n binary string eg: 00010</div>
        </div>

        <hr />

        <label>Gate to add:</label>
        <select id="gateType">
          <optgroup label="Single-qubit (fixed)">
            <option value="X">X (Pauli-X)</option>
            <option value="Y">Y (Pauli-Y)</option>
            <option value="Z">Z (Pauli-Z)</option>
            <option value="H">H (Hadamard)</option>
            <option value="S">S</option>
            <option value="Sdg">Sâ€ </option>
            <option value="T">T</option>
            <option value="Tdg">Tâ€ </option>
            <option value ="MEASURE">MEASURE</option>
          </optgroup>
          <optgroup label="Single-qubit (parameterized)">
            <option value="Rx">Rx(Î¸)</option>
            <option value="Ry">Ry(Î¸)</option>
            <option value="Rz">Rz(Î¸)</option>
            <option value="Phase">Phase(Ï†)</option>
          </optgroup>
          <optgroup label="Two-qubit">
            <option value="CNOT">CNOT (control,target)</option>
            <option value="CZ">CZ (control,target)</option>
            <option value="SWAP">SWAP (a,b)</option>
          </optgroup>
          <optgroup label="Three-qubit">
            <option value="CCNOT">CCNOT / Toffoli (c1,c2; target)</option>
          </optgroup>
          
        </select>

        <!-- Single-qubit target -->
        <div id="singleTargetDiv">
          <label>Target qubit:</label>
          <select id="targetQ"></select>
        </div>

        <!-- Angle for parameterized gates -->
        <div id="angleDiv" class="hidden">
          <label><span id="angleLabel">Î¸ (degrees):</span></label>
          <input id="angleDeg" type="number" step="1" value="90" />
        </div>

        <!-- CNOT / CZ -->
        <div id="cnotDiv" class="hidden">
          <label>Control qubit:</label>
          <select id="controlQ"></select>
          <label>Target qubit:</label>
          <select id="targetQ2"></select>
        </div>

        <!-- SWAP -->
        <div id="swapDiv" class="hidden">
          <label>Qubit A:</label>
          <select id="swapA"></select>
          <label>Qubit B:</label>
          <select id="swapB"></select>
        </div>

        <!-- Toffoli -->
        <div id="ccnotDiv" class="hidden">
          <label>Control 1:</label>
          <select id="cc_c1"></select>
          <label>Control 2:</label>
          <select id="cc_c2"></select>
          <label>Target:</label>
          <select id="cc_t"></select>
        </div>

        <div class="row gap">
          <button id="btnAddGate">Add Gate</button>
          <button id="btnUndo">Undo Last</button>
          <button id="btnClearGates">Clear Gates</button>
        </div>

        <div id="gatesList"></div>

        <hr />
        <div id="customQubitContainer" class="hidden">
          <label>qubit to:</label>
          <select id="qubitSelect"></select>
        </div>
        <button id="btnRun">Visualize</button>
        <button id="cRun">Run Circuit</button>
        </div>
    </div>

    <hr />
  
    <canvas id="stateBarChart" class = "hidden"></canvas>
  <div id="results">
  </div>
  <div id="backendResults" style="white-space: pre-wrap; margin-top: 20px; border: 1px solid #ccc; padding: 10px;"></div>
  
  <div id="loading" class="loading-spinner" style="display:none;"></div>
      
  </div>
  <div class="right-panel">
  <div id="quantumCircuit" class ="grid"><h2>circuit diagram</h2></div>
  <div id="qsphereDiv" style="width:600px;height:600px;" class ="hidden"></div>
  <div id="blochSpheres" class="grid"></div>
  <canvas id="histogram"></canvas>
  </div>
</div>
  <script src="script.js">
  </script>
</body>
</html>
